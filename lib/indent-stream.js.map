{"version":3,"sources":["../src/indent-stream.js"],"names":[],"mappings":";;;;;kBAoBwB,Y;;AApBxB;;;;AACA;;;;;;;;;;;;;;;;;;;AAaA,IAAM,kBAAkB;AACtB,SAAO,SADe;AAEtB,UAAQ,SAFc;AAGtB,UAAQ;AAHc,CAAxB;;AAMe,SAAS,YAAT,CAAsB,GAAtB,EAA2B;AACxC,MAAM,UAAU,iBAAE,KAAF,CAAQ,EAAR,EAAY,eAAZ,EAA6B,GAA7B,CAAhB;;AAEA,WAAS,SAAT,CAAmB,KAAnB,EAA0B,QAA1B,EAAoC,EAApC,EAAwC;AACtC,QAAM,SAAS,iBAAE,GAAF,CAAM,KAAN,EAAa,QAAQ,MAArB,CAAf;AACA,QAAI,UAAU,iBAAE,GAAF,CAAM,KAAN,EAAa,QAAQ,KAArB,CAAd;;AAEA,QAAI,CAAC,MAAL,EAAa;AACX,WAAK,IAAL,CAAU,KAAV;AACA,aAAO,IAAP;AACD;;AAED,cAAU,QAAQ,OAAR,CAAgB,KAAhB,SAA4B,MAA5B,CAAV;AACA,QAAM,SAAS,iBAAE,MAAF,CAAS,KAAT,sBAAmB,QAAQ,MAA3B,EAAoC,OAApC,EAAf;;AAEA,SAAK,IAAL,CAAU,MAAV;AACA,WAAO,IAAP;AACD;;AAED,SAAO,kBAAS,GAAT,CAAa,SAAb,CAAP;AACD","file":"indent-stream.js","sourcesContent":["import through2 from 'through2';\nimport _ from 'lodash';\n\n/**\n* Indents each line of a chunk by the provided indent amount\n*\n* Input stream: (object)\n* - content (string, required)\n* - indent (string, optional) - String to be appended to the start of each line.\n*\n* Output stream: (object)\n* - content (string)\n*/\n\nconst DEFAULT_OPTIONS = {\n  input: 'content',\n  output: 'content',\n  indent: 'indent',\n};\n\nexport default function IndentStream(opt) {\n  const options = _.merge({}, DEFAULT_OPTIONS, opt);\n\n  function transform(chunk, encoding, cb) {\n    const indent = _.get(chunk, options.indent);\n    let content = _.get(chunk, options.input);\n\n    if (!indent) {\n      this.push(chunk);\n      return cb();\n    }\n\n    content = content.replace(/\\n/g, `\\n${indent}`);\n    const output = _.assign(chunk, { [options.output]: content });\n\n    this.push(output);\n    return cb();\n  }\n\n  return through2.obj(transform);\n}\n"]}